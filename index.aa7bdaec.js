!function(){var t,e={};function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.InitialState;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.status=e.InitialStatus.idle,this.state=t.map(function(t){return a(t)})}return t=[{key:"moveLeft",value:function(){if("playing"!==this.status)return!1;for(var t=[[],[],[],[]],e=[[],[],[],[]],r=0;r<4;r++)t[r]=this.state[r].filter(function(t){return 0!==t});for(var n=0;n<4;n++)for(var a=0;a<t[n].length;a++)t[n][a]===t[n][a+1]&&(this.score+=t[n][a],t[n][a]=2*t[n][a],t[n][a+1]=0,a++);for(var o=0;o<4;o++)e[o]=t[o].filter(function(t){return 0!==t});for(var i=0;i<4;i++)for(var s=0;s<4;s++)e[i][s]>0?this.state[i][s]=e[i][s]:e[i][s]||(this.state[i][s]=0);this.boards()}},{key:"moveRight",value:function(){if("playing"!==this.status)return!1;for(var t=[[],[],[],[]],e=[[],[],[],[]],r=0;r<4;r++)t[r]=this.state[r].filter(function(t){return 0!==t});for(var n=0;n<4;n++)for(var a=0;a<t[n].length;a++)t[n][a]===t[n][a+1]&&(this.score+=t[n][a],t[n][a]=2*t[n][a],t[n][a+1]=0,a++);for(var o=0;o<4;o++)e[o]=t[o].filter(function(t){return 0!==t});for(var i=0;i<4;i++)for(var s=0,l=3,u=3;u>=0;u--)e[i][u]&&e[i][u]>0?(this.state[i][l]=e[i][u],l--):!e[i][u]&&(this.state[i][s]=0,s++);this.boards()}},{key:"moveUp",value:function(){if("playing"!==this.status)return!1;for(var t=[[],[],[],[]],e=0;e<4;e++)for(var r=0;r<4;r++)t[r][e]=this.state[e][r];for(var n=[[],[],[],[]],a=[[],[],[],[]],o=0;o<4;o++)n[o]=t[o].filter(function(t){return 0!==t});for(var i=0;i<4;i++)for(var s=0;s<n[i].length;s++)n[i][s]===n[i][s+1]&&(this.score+=n[i][s],n[i][s]=2*n[i][s],n[i][s+1]=0,s++);for(var l=0;l<4;l++)a[l]=n[l].filter(function(t){return 0!==t});for(var u=0;u<4;u++)for(var c=0;c<4;c++)a[u][c]>0?t[u][c]=a[u][c]:a[u][c]||(t[u][c]=0);for(var f=0;f<4;f++)for(var v=0;v<4;v++)this.state[f][v]=t[v][f];this.boards()}},{key:"moveDown",value:function(){if("playing"!==this.status)return!1;for(var t=[[],[],[],[]],e=0;e<4;e++)for(var r=0;r<4;r++)t[r][e]=this.state[e][r];for(var n=[[],[],[],[]],a=[[],[],[],[]],o=0;o<4;o++)n[o]=t[o].filter(function(t){return 0!==t});for(var i=0;i<4;i++)for(var s=0;s<n[i].length;s++)n[i][s]===n[i][s+1]&&(this.score+=n[i][s],n[i][s]=2*n[i][s],n[i][s+1]=0,s++);for(var l=0;l<4;l++)a[l]=n[l].filter(function(t){return 0!==t});for(var u=0;u<4;u++)for(var c=0,f=3,v=3;v>=0;v--)a[u][v]&&a[u][v]>0?(t[u][f]=a[u][v],f--):!a[u][v]&&(t[u][c]=0,c++);for(var h=0;h<4;h++)for(var d=0;d<4;d++)this.state[h][d]=t[d][h];this.boards()}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){var t=document.querySelector(".message-win"),e=document.querySelector(".message-lose");"win"===this.status?t.classList.remove("hidden"):"lose"===this.status?e.classList.remove("hidden"):"playing"===this.status&&(t.classList.add("hidden"),e.classList.add("hidden"))}},{key:"getState",value:function(){var t=this;document.querySelectorAll(".field-cell").forEach(function(e,r){e.classList.remove("field-cell--".concat(e.textContent)),e.textContent=0===t.state.flat()[r]?"":t.state.flat()[r],e.classList.add("field-cell--".concat(e.textContent))}),this.state.flat().includes(0)?this.state.flat().includes(2048)&&(this.status=e.InitialStatus.win):this.status=e.InitialStatus.lose}},{key:"start",value:function(){return this.state=e.InitialState.map(function(t){return a(t)}),this.score=0,this.randomCells(),this.randomCells(),this.status=e.InitialStatus.playing,this.status}},{key:"restart",value:function(){this.score=0,this.state=e.InitialState.map(function(t){return a(t)}),this.getState()}},{key:"randomCells",value:function(){var t=[];this.state.map(function(e,r){e.map(function(e,n){0===e&&t.push({indexRow:r,indexCell:n})})});var e=Math.round(Math.random()*(t.length-1));this.state[t[e].indexRow][t[e].indexCell]=.9>Math.random()?2:4}},{key:"boards",value:function(){var t=[];document.querySelectorAll(".field-cell").forEach(function(e,r){t[r]=""===e.textContent?0:e.textContent}),this.state.flat().toString()!==t.toString()&&this.randomCells()}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}();r(o,"InitialState",[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),r(o,"InitialStatus",{idle:"idle",playing:"playing",win:"win",lose:"lose"});var i=new((t=o)&&t.__esModule?t.default:t),s=document.querySelector(".game-score"),l=document.querySelector(".button"),u=document.querySelector(".message-start");l.addEventListener("click",function(){u.classList.toggle("hidden"),l.classList.toggle("restart"),document.querySelector(".restart")&&(document.querySelector(".restart").textContent="Restart",i.start()),l.classList.toggle("start"),document.querySelector(".start")&&(document.querySelector(".start").textContent="Start",i.restart(),s.textContent=i.getScore()),i.getState()}),document.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":i.moveLeft();break;case"ArrowRight":i.moveRight();break;case"ArrowUp":i.moveUp();break;case"ArrowDown":i.moveDown()}s.textContent=i.getScore(),i.getState(),i.getStatus()})}();
//# sourceMappingURL=index.aa7bdaec.js.map
